var rad2deg=57.29577951;var deg2rad=0.017453292;var WGS84SemiMajor=6378137;var WGS84Eccentricity=0.00669438037928458;var OSGBSemiMajor=6377563.396;var OSGBSemiMinor=6356256.91;var OSGBEastingOrigin=400000;var OSGBNorthingOrigin=-100000;var OSGBScaleFactor=0.9996012717;var OSGBEccentricity=0.0066705397616;var OSGBFalseEast=-0.03490658503988659;var OSGBFalseNorth=0.8552113334772214;var OSISemiMajor=6377340.189;var OSISemiMinor=6356034.447;var OSIEastingOrigin=200000;var OSINorthingOrigin=250000;var OSIScaleFactor=1.000035;var OSIEccentricity=0.00667054015;var OSIFalseEast=-0.13962634015954636;var OSIFalseNorth=0.9337511498169663;function ConvertBNGtoWGS84(e,d){var a=NEtoLL(Number(e),Number(d),OSGBSemiMajor,OSGBSemiMinor,OSGBEastingOrigin,OSGBNorthingOrigin,OSGBScaleFactor,OSGBEccentricity,OSGBFalseEast,OSGBFalseNorth);var b=10;var c=transform(a.latitude,a.longitude,OSGBSemiMajor,OSGBEccentricity,b,WGS84SemiMajor,WGS84Eccentricity,375,-111,431,0,0,0,0);a.latitude=c.latitude*rad2deg;a.longitude=c.longitude*rad2deg;return a}function ConvertINGtoWGS84(e,d){var a=NEtoLL(Number(e),Number(d),OSISemiMajor,OSISemiMinor,OSIEastingOrigin,OSINorthingOrigin,OSIScaleFactor,OSIEccentricity,OSIFalseEast,OSIFalseNorth);var b=10;var c=transform(a.latitude,a.longitude,OSISemiMajor,OSIEccentricity,b,WGS84SemiMajor,WGS84Eccentricity,506,-122,611,0,0,0,0);a.latitude=c.latitude*rad2deg;a.longitude=c.longitude*rad2deg;return a}function NEtoLL(z,r,C,A,h,l,u,g,w,D){var i=C*u;var B=A*u;var q=(i-B)/(i+B);var c=z-h;var x=InitialLat(r,l,i,D,q,B);var F=i/(Math.sqrt(1-(g*(Math.sin(x)*Math.sin(x)))));var d=(F*(1-g))/(1-(g*(Math.sin(x))*(Math.sin(x))));var f=(F/d)-1;var v=Math.tan(x)*Math.tan(x);var t=Math.pow(Math.tan(x),4);var p=Math.pow(Math.tan(x),6);var k=Math.pow(Math.cos(x),-1);var y=Math.tan(x)/(2*d*F);var m=(Math.tan(x)/(24*d*(F*F*F)))*(5+(3*v)+f-(9*f*v));var H=((Math.tan(x))/(720*d*Math.pow(F,5)))*(61+(90*v)+(45*Math.pow(Math.tan(x),4)));var o=(x-((c*c)*y)+(Math.pow(c,4)*m)-(Math.pow(c,6)*H));var e=Math.pow(Math.cos(x),-1)/F;var j=(k/(6*(F*F*F)))*((F/d)+(2*(v)));var G=(k/(120*Math.pow(F,5)))*(5+(28*v)+(24*t));var E=k/(5040*Math.pow(F,7))*(61+(662*v)+(1320*t)+(720*p));var s=(w+(c*e)-((c*c*c)*j)+(Math.pow(c,5)*G)-(Math.pow(c,7)*E));var I={latitude:o,longitude:s};return I}function transform(i,d,I,H,C,J,j,q,E,c,n,B,b,u){var K=u*0.000001;var r=I/(Math.sqrt(1-(H*(Math.sin(i)*Math.sin(i)))));var o=(r+C)*Math.cos(i)*Math.cos(d);var m=(r+C)*Math.cos(i)*Math.sin(d);var l=((1-H)*r+C)*Math.sin(i);var g=(n/3600)*deg2rad;var k=(B/3600)*deg2rad;var t=(b/3600)*deg2rad;var G=o+(o*K)-(m*t)+(l*k)+q;var F=(o*t)+m+(m*K)-(l*g)+E;var D=(-1*o*k)+(m*g)+l+(l*K)+c;d=Math.atan(F/G);var w=Math.sqrt((G*G)+(F*F));i=Math.atan(D/(w*(1-j)));r=J/(Math.sqrt(1-j*(Math.sin(i)*Math.sin(i))));var A=1;var f=0;while(A>0.001){f=Math.atan((D+j*r*Math.sin(i))/w);A=Math.abs(f-i);i=f}C=w/Math.cos(i)-r;var L={latitude:i,longitude:d,height:C};return L}function InitialLat(c,f,d,j,b,h){var i=((c-f)/d)+j;var e=Marc(h,b,j,i);var g=((c-f-e)/d)+i;var a=0;while((Math.abs(c-f-e)>0.00001)&&(a<20)){a=a+1;g=((c-f-e)/d)+i;e=Marc(h,b,j,g);i=g}return g}function Marc(b,d,a,c){return b*(((1+d+((5/4)*(d*d))+((5/4)*(d*d*d)))*(c-a))-(((3*d)+(3*(d*d))+((21/8)*(d*d*d)))*(Math.sin(c-a))*(Math.cos(c+a)))+((((15/8)*(d*d))+((15/8)*(d*d*d)))*(Math.sin(2*(c-a)))*(Math.cos(2*(c+a))))-(((35/24)*(d*d*d))*(Math.sin(3*(c-a)))*(Math.cos(3*(c+a)))))};